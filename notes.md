### 2.2.3 è¯­å¥ä¸è¡¨è¾¾å¼

```rust
// ä½¿ç”¨ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œèµ·æ¥
fn main() {
   let v = {
       let mut x = 1;
       x += 2
   };

   assert_eq!(v, 3);
}
```

æ–¹æ³•ä¸€ï¼š

```rust
// ä½¿ç”¨ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œèµ·æ¥
fn main() {
   let v = {
       let mut x = 1;
       x += 2; // å˜æˆä¸€ä¸ªè¯­å¥
       x       // è¿”å›
   };

   assert_eq!(v, 3);
}
```

æ–¹æ³•äºŒï¼š

```rust
// ä½¿ç”¨ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œèµ·æ¥
fn main() {
   let v = {
       let mut x = 1;
       x += 2
   };

   assert_eq!(v, ()); // è¿”å›çš„æ˜¯()
}
```

### 2.2.4 å‡½æ•°

3.ğŸŒŸğŸŒŸğŸŒŸ

```rust
// ç”¨ä¸¤ç§æ–¹æ³•æ±‚è§£
fn main() {
    never_return();
}

fn never_return() -> ! {
    // å®ç°è¿™ä¸ªå‡½æ•°ï¼Œä¸è¦ä¿®æ”¹å‡½æ•°ç­¾å!
    
}
```

è§£ç­”ï¼š

æ–¹æ³•ä¸€ï¼š

```rust
// æ–¹æ³•ä¸€
fn main() {
    never_return();
}

fn never_return() -> ! {
    // å®ç°è¿™ä¸ªå‡½æ•°ï¼Œä¸è¦ä¿®æ”¹å‡½æ•°ç­¾å!
 		panic!("ä¸è¿”å›ä»»ä½•å€¼");  // ä½¿ç”¨panic
    
}
```

æ–¹æ³•äºŒï¼šä½¿ç”¨loop

```rust
// æ–¹æ³•äºŒ
fn main() {
    never_return();
}

use std::thread;
use std::time;

fn never_return() -> ! {
    // å®ç°è¿™ä¸ªå‡½æ•°ï¼Œä¸è¦ä¿®æ”¹å‡½æ•°ç­¾å!
    loop {
        println!("ä¸è¿”å›ä»»ä½•å€¼");
        thread::sleep(time::Duration::from_secs(1));
    } 
}
```

4.ğŸŒŸğŸŒŸ å‘æ•£å‡½æ•°( Diverging function )ä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ç”¨äºæ›¿ä»£éœ€è¦è¿”å›ä»»ä½•å€¼çš„åœ°æ–¹

```rust

fn main() {
    println!("Success!");
}

fn get_option(tp: u8) -> Option<i32> {
    match tp {
        1 => {
            // TODO
        }
        _ => {
            // TODO
        }
    };
    
    // è¿™é‡Œä¸å…¶è¿”å›ä¸€ä¸ª Noneï¼Œä¸å¦‚ä½¿ç”¨å‘æ•£å‡½æ•°æ›¿ä»£
    never_return_fn()
}

// ä½¿ç”¨ä¸‰ç§æ–¹æ³•å®ç°ä»¥ä¸‹å‘æ•£å‡½æ•°
fn never_return_fn() -> ! {
    
}

```

æ–¹æ³•ä¸€ï¼š

```rust
fn never_return_fn() -> ! {
    unimplemented!();
}
```

æ–¹æ³•äºŒï¼š

```rust
fn never_return_fn() -> ! {
    panic!();
}
```

æ–¹æ³•ä¸‰ï¼š

```rust
fn never_return_fn() -> ! {
    loop {
        std::thread::sleep(std::time::Duration::from_secs(1));
    };
}
```

## 2.3 æ‰€æœ‰æƒå’Œå€Ÿç”¨

### 2.3.1 æ‰€æœ‰æƒ

1.ğŸŒŸğŸŒŸ

```rust
fn main() {
    // ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘
    let x = String::from("hello, world");
    let y = x;
    println!("{},{}",x,y);
}
```

æ–¹æ³•ä¸€ï¼š

```rust
fn main() {
    // ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘
    let x = "hello, world";
    let y = x;
    println!("{},{}",x,y);
}
```

æ–¹æ³•äºŒï¼š

```rust

fn main() {
    // ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘
    let x : &str = "hello, world";
    let y = x;
    println!("{},{}",x,y);
}
```

æ–¹æ³•ä¸‰ï¼šæ·±æ‹·è´

```rust

fn main() {
    // ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘
    let x = String::from("hello, world");
    let y = x.clone();
    println!("{},{}",x,y);
}
```

æ–¹æ³•å››ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹

```rust

fn main() {
    // ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘
    let x = 10;
    let y = x;
    println!("{},{}",x,y);
}
```

3.

```rust

fn main() {
    let s = give_ownership();
    println!("{}", s);
}

// åªèƒ½ä¿®æ”¹ä¸‹é¢çš„ä»£ç !
fn give_ownership() -> String {
    let s = String::from("hello, world");
    // convert String to Vec
    // å°† String è½¬æ¢æˆ Vec ç±»å‹
    let _s = s.into_bytes();
    s
}
```

æ–¹æ³•ä¸€ï¼š

```rust

fn main() {
    let s = give_ownership();
    println!("{}", s);
}

// åªèƒ½ä¿®æ”¹ä¸‹é¢çš„ä»£ç !
fn give_ownership() -> String {
    let s = String::from("hello, world");
    s
}
```

æ–¹æ³•äºŒï¼š**è¿˜éœ€è¦å¼„æ˜ç™½`as_bytes()`**

```rust

fn main() {
    let s = give_ownership();
    println!("{}", s);
}

// åªèƒ½ä¿®æ”¹ä¸‹é¢çš„ä»£ç !
fn give_ownership() -> String {
    let s = String::from("hello, world");
    // convert String to Vec
    // å°† String è½¬æ¢æˆ Vec ç±»å‹
    let _s = s.as_bytes();
    s
}
```

7.ğŸŒŸğŸŒŸğŸŒŸ

```rust
fn main() {
    let x = Box::new(5);
    
    let ...      // å®Œæˆè¯¥è¡Œä»£ç ï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒè¡Œï¼
    
    *y = 4;
    
    assert_eq!(*x, 5);
}
```

è§£ç­”ï¼š

```rust

fn main() {
    let x = Box::new(5);
    
    let mut y = Box::new(3);      // å®Œæˆè¯¥è¡Œä»£ç ï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒè¡Œï¼
    
    *y = 4;
    
    assert_eq!(*x, 5);
}
```

è¡¥å……çŸ¥è¯†ï¼šåœ¨å †ä¸Šåˆ†é…ä¸€ä¸ªå€¼çš„æœ€ç®€å•æ–¹å¼æ˜¯`Box::new`ã€‚ä¾‹å¦‚ï¼š

```rust
let t = (12, "eggs");
let b = Box::new(t); // åœ¨å †ä¸Šåˆ†é…ä¸€ä¸ªå…ƒç»„
```

### 2.3.2 å¼•ç”¨å’Œå€Ÿç”¨

6.ğŸŒŸğŸŒŸğŸŒŸ`ref` ä¸ `&` ç±»ä¼¼ï¼Œå¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå€¼çš„å¼•ç”¨ï¼Œä½†æ˜¯å®ƒä»¬çš„ç”¨æ³•æœ‰æ‰€ä¸åŒã€‚

```rust
fn main() {
    let c = 'ä¸­';

    let r1 = &c;
    // å¡«å†™ç©ºç™½å¤„ï¼Œä½†æ˜¯ä¸è¦ä¿®æ”¹å…¶å®ƒè¡Œçš„ä»£ç 
    let __ r2 = c;

    assert_eq!(*r1, *r2);
    
    // åˆ¤æ–­ä¸¤ä¸ªå†…å­˜åœ°å€çš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰
    assert_eq!(get_addr(r1),get_addr(r2));
}

// è·å–ä¼ å…¥å¼•ç”¨çš„å†…å­˜åœ°å€çš„å­—ç¬¦ä¸²å½¢å¼
fn get_addr(r: &char) -> String {
    format!("{:p}", r)
}
```

9.ğŸŒŸğŸŒŸ Ok: ä»å¯å˜å¯¹è±¡å€Ÿç”¨ä¸å¯å˜

```rust
// ä¸‹é¢çš„ä»£ç æ²¡æœ‰ä»»ä½•é”™è¯¯
fn main() {
    let mut s = String::from("hello, ");

    borrow_object(&s);
    
    s.push_str("world");
}

fn borrow_object(s: &String) {}
```

## 2.4 å¤åˆç±»å‹

`unimplemented!()` å‘Šè¯‰ç¼–è¯‘å™¨è¯¥å‡½æ•°å°šæœªå®ç°ï¼Œ`unimplemented!()` æ ‡è®°é€šå¸¸æ„å‘³ç€æˆ‘ä»¬æœŸæœ›å¿«é€Ÿå®Œæˆä¸»è¦ä»£ç ï¼Œå›å¤´å†é€šè¿‡æœç´¢è¿™äº›æ ‡è®°æ¥å®Œæˆæ¬¡è¦ä»£ç ï¼Œç±»ä¼¼çš„æ ‡è®°è¿˜æœ‰ `todo!()`ï¼Œå½“ä»£ç æ‰§è¡Œåˆ°è¿™ç§æœªå®ç°çš„åœ°æ–¹æ—¶ï¼Œç¨‹åºä¼šç›´æ¥æŠ¥é”™ã€‚

### 2.4.1 å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡

2.ğŸŒŸğŸŒŸ å¦‚æœè¦ä½¿ç”¨ `str` ç±»å‹ï¼Œåªèƒ½é…åˆ `Box`ã€‚ `&` å¯ä»¥ç”¨æ¥å°† `Box<str>` è½¬æ¢ä¸º `&str` ç±»å‹

```rust
// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•æ¥ä¿®å¤é”™è¯¯
fn main() {
    let s: Box<str> =  "hello, world".into();
    greetings(s)
}

fn greetings(s: &str) {
    println!("{}",s)
}
```

æ–¹æ³•ä¸€ï¼š

```rust
fn main() {
    let s: Box<str> =  "hello, world".into();
    greetings(&s) // è¿™é‡Œç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡å¼•ç”¨
}

fn greetings(s: &str) {
    println!("{}",s)
}
```

æ–¹æ³•äºŒï¼šğŸš©è¿˜éœ€è¦å¤šç†è§£

```rust
fn main() {
    let s: Box<&str> =  "hello, world".into(); // è¿™é‡Œå–åˆ°äº†å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å¼•ç”¨
    greetings(*s) // è§£å¼•ç”¨
}

fn greetings(s: &str) {
    println!("{}",s)
}
```

4.

```rust
// ä¿®å¤æ‰€æœ‰é”™è¯¯ï¼Œå¹¶ä¸”ä¸è¦æ–°å¢ä»£ç è¡Œ
fn main() {
    let  s =  String::from("hello");
    s.push(',');
    s.push(" world");
    s += "!".to_string();

    println!("{}", s)
}
```

è§£ç­”ï¼š

* è¿½åŠ å­—ç¬¦ä¸²ç”¨`s.push_str("somestr")`
* ä½¿ç”¨ `+` æˆ–è€… `+=` è¿æ¥å­—ç¬¦ä¸²ï¼Œè¦æ±‚å³è¾¹çš„å‚æ•°å¿…é¡»ä¸ºå­—ç¬¦ä¸²çš„åˆ‡ç‰‡å¼•ç”¨ï¼ˆSlice)ç±»å‹ã€‚è€Œ`s += "!".to_string();`è¿™é‡Œå°†`"!"`è½¬æ¢æˆäº†å­—ç¬¦ä¸²ç±»å‹ï¼Œå…¶å®ä¸ç”¨è½¬æ¢ï¼Œ`"!"`æœ¬èº«å°±æ˜¯`&str`åˆ‡ç‰‡å¼•ç”¨ç±»å‹ã€‚

```rust
fn main() {
    let mut s =  String::from("hello");
    s.push(',');
    s.push_str(" world"); // ä¿®æ”¹1
    s += "!"; 						// ä¿®æ”¹2

    println!("{}", s)
}
```

10.ğŸŒŸğŸŒŸğŸŒŸ æœ‰æ—¶å€™éœ€è¦è½¬ä¹‰çš„å­—ç¬¦å¾ˆå¤šï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥ä¹¦å†™å­—ç¬¦ä¸²: raw string.

```rust
/* å¡«ç©ºå¹¶ä¿®å¤æ‰€æœ‰é”™è¯¯ */
fn main() {
    let raw_str = r"Escapes don't work here: \x3F \u{211D}";
    assert_eq!(raw_str, "Escapes don't work here: ? â„");

    // å¦‚æœä½ å¸Œæœ›åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨åŒå¼•å·ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å½¢å¼
    let quotes = r#"And then I said: "There is no escape!""#;
    println!("{}", quotes);

    // å¦‚æœå¸Œæœ›åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ # å·ï¼Œå¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š
    let  delimiter = r###"A string with "# in it. And even "##!"###;
    println!("{}", delimiter);

    // å¡«ç©º
    let long_delimiter = __;
    assert_eq!(long_delimiter, "Hello, \"##\"")
}
```

è§£ç­”ï¼š`long_delimiter`æƒ³è¦è¾“å‡ºçš„æ˜¯`Hello, \"##\"`ï¼Œå…¶ä¸­çš„`\`æ˜¯è½¬ç§»å­—ç¬¦æ ‡å¿—ï¼Œä¸æ˜¯è¦è¾“å‡º`\`ã€‚

```rust
/* å¡«ç©ºå¹¶ä¿®å¤æ‰€æœ‰é”™è¯¯ */
fn main() {
    let raw_str = "Escapes don't work here: \x3F \u{211D}";
    assert_eq!(raw_str, "Escapes don't work here: ? â„");

    // å¦‚æœä½ å¸Œæœ›åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨åŒå¼•å·ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å½¢å¼
    let quotes = r#"And then I said: "There is no escape!""#;
    println!("{}", quotes);

    // å¦‚æœå¸Œæœ›åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ # å·ï¼Œå¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š
    let  delimiter = r###"A string with "# in it. And even "##!"###;
    println!("{}", delimiter);

    // å¡«ç©º
    let long_delimiter = r###"Hello, "##""###; // æ³¨æ„ï¼ï¼ï¼
    assert_eq!(long_delimiter, "Hello, \"##\"")
}
```

12.

```rust
fn main() {
    // å¡«ç©ºï¼Œæ‰“å°å‡º "ä½ å¥½ï¼Œä¸–ç•Œ" ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦
    for c in "ä½ å¥½ï¼Œä¸–ç•Œ".__ {
        println!("{}", c)
    }
}
```

è§£ç­”ï¼šå¦‚æœä½ æƒ³è¦ä»¥ Unicode å­—ç¬¦çš„æ–¹å¼éå†å­—ç¬¦ä¸²ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨ `chars` æ–¹æ³•ã€‚

```rust

fn main() {
    // å¡«ç©ºï¼Œæ‰“å°å‡º "ä½ å¥½ï¼Œä¸–ç•Œ" ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦
    for c in "ä½ å¥½ï¼Œä¸–ç•Œ".chars() {
        println!("{}", c)
    }
}
```

åˆ‡ç‰‡ç›¸å…³é¢˜ç›®

åˆ‡ç‰‡è·Ÿæ•°ç»„ç›¸ä¼¼ï¼Œä½†æ˜¯åˆ‡ç‰‡çš„é•¿åº¦æ— æ³•åœ¨ç¼–è¯‘æœŸå¾—çŸ¥ï¼Œå› æ­¤ä½ æ— æ³•ç›´æ¥ä½¿ç”¨åˆ‡ç‰‡ç±»å‹ã€‚

1. ğŸŒŸğŸŒŸ è¿™é‡Œ, `[i32]` å’Œ `str` éƒ½æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨å®ƒä»¬ä¼šé€ æˆç¼–è¯‘é”™è¯¯ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚ä¸ºäº†è§£å†³ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ‡ç‰‡çš„å¼•ç”¨ï¼š `&[i32]`, `&str`.

```rust
// ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ!
fn main() {
    let arr = [1, 2, 3];
    let s1: [i32] = arr[0..2];

    let s2: str = "hello, world" as str;
}
```

è§£ç­”ï¼š

```rust
// ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ!
fn main() {
    let arr = [1, 2, 3];
    let s1: &[i32] = &arr[0..2];

    let s2: &str = "hello, world" as &str;
}
```

2. ä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨å ç”¨äº†2ä¸ªå­—å¤§å°çš„å†…å­˜ç©ºé—´( ä»ç°åœ¨å¼€å§‹ï¼Œä¸ºäº†ç®€æ´æ€§è€ƒè™‘ï¼Œå¦‚æ— ç‰¹æ®ŠåŸå› ï¼Œ**æˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨åˆ‡ç‰‡æ¥ç‰¹æŒ‡åˆ‡ç‰‡å¼•ç”¨** )ã€‚ è¯¥åˆ‡ç‰‡çš„ç¬¬ä¸€ä¸ªå­—æ˜¯æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªå­—æ˜¯åˆ‡ç‰‡çš„é•¿åº¦ã€‚å­—çš„å¤§å°å–å†³äºå¤„ç†å™¨æ¶æ„ï¼Œä¾‹å¦‚åœ¨ `x86-64` ä¸Šï¼Œå­—çš„å¤§å°æ˜¯ 64 ä½ä¹Ÿå°±æ˜¯ 8 ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨å°±æ˜¯ 16 ä¸ªå­—èŠ‚å¤§å°ã€‚

   åˆ‡ç‰‡( å¼•ç”¨ )å¯ä»¥ç”¨æ¥å€Ÿç”¨æ•°ç»„çš„æŸä¸ªè¿ç»­çš„éƒ¨åˆ†ï¼Œå¯¹åº”çš„ç­¾åæ˜¯ `&[T]`ï¼Œå¤§å®¶å¯ä»¥ä¸æ•°ç»„çš„ç­¾åå¯¹æ¯”ä¸‹ `[T; Length]`ã€‚

```rust
fn main() {
    let arr: [char; 3] = ['ä¸­', 'å›½', 'äºº'];

    let slice = &arr[..2];
  
    // ä¿®æ”¹æ•°å­— `6` è®©ä»£ç å·¥ä½œ
    // å°æç¤º: åˆ‡ç‰‡å’Œæ•°ç»„ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å¼•ç”¨ã€‚å¦‚æœæ˜¯æ•°ç»„çš„è¯ï¼Œé‚£ä¸‹é¢çš„ `assert!` å°†ä¼šé€šè¿‡ï¼š å› ä¸º'ä¸­'å’Œ'å›½'æ˜¯ UTF-8 å­—ç¬¦ï¼Œå®ƒä»¬æ¯ä¸ªå ç”¨ 3 ä¸ªå­—èŠ‚ï¼Œ2 ä¸ªå­—ç¬¦å°±æ˜¯ 6 ä¸ªå­—èŠ‚
    assert!(std::mem::size_of_val(&slice) == 16); // æ³¨æ„ï¼šè¿™é‡Œåº”è¯¥æ˜¯16ï¼Œè¡¨ç¤ºä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨
}
```

â€‹		3.ğŸŒŸğŸŒŸ

```rust
fn main() {
   let arr: [i32; 5] = [1, 2, 3, 4, 5];
  // å¡«ç©ºè®©ä»£ç å·¥ä½œèµ·æ¥
  let slice: __ = __;
  assert_eq!(slice, &[2, 3, 4]);
}
```

è§£ç­”ï¼š

```rust
fn main() {
   let arr: [i32; 5] = [1, 2, 3, 4, 5];
  // å¡«ç©ºè®©ä»£ç å·¥ä½œèµ·æ¥
  let slice: &[i32] = &arr[1..4];
  assert_eq!(slice, &[2, 3, 4]);
}
```

6. ğŸŒŸğŸŒŸ `&String` å¯ä»¥è¢«éšå¼åœ°è½¬æ¢æˆ `&str` ç±»å‹.

   ```rust
   // ä¿®å¤æ‰€æœ‰é”™è¯¯
   fn main() {
       let mut s = String::from("hello world");
   
       // è¿™é‡Œ, &s æ˜¯ `&String` ç±»å‹ï¼Œä½†æ˜¯ `first_word` å‡½æ•°éœ€è¦çš„æ˜¯ `&str` ç±»å‹ã€‚
       // å°½ç®¡ä¸¤ä¸ªç±»å‹ä¸ä¸€æ ·ï¼Œä½†æ˜¯ä»£ç ä»ç„¶å¯ä»¥å·¥ä½œï¼ŒåŸå› æ˜¯ `&String` ä¼šè¢«éšå¼åœ°è½¬æ¢æˆ `&str` ç±»å‹ï¼Œå¦‚æœå¤§å®¶æƒ³è¦çŸ¥é“æ›´å¤šï¼Œå¯ä»¥çœ‹çœ‹ Deref ç« èŠ‚: https://course.rs/advance/smart-pointer/deref.html
       let word = first_word(&s);
   
       s.clear(); // error!
   
       println!("the first word is: {}", word);
   }
   fn first_word(s: &str) -> &str {
       &s[..1]
   }
   ```

   é”™è¯¯åŸå› ï¼šå½“æˆ‘ä»¬å·²ç»æœ‰äº†å¯å˜å€Ÿç”¨æ—¶ï¼Œå°±æ— æ³•å†æ‹¥æœ‰ä¸å¯å˜çš„å€Ÿç”¨ã€‚å› ä¸º `clear` éœ€è¦æ¸…ç©ºæ”¹å˜ `String`ï¼Œå› æ­¤å®ƒéœ€è¦ä¸€ä¸ªå¯å˜å€Ÿç”¨ï¼ˆåˆ©ç”¨ VSCode å¯ä»¥çœ‹åˆ°è¯¥æ–¹æ³•çš„å£°æ˜æ˜¯ `pub fn clear(&mut self)` ï¼Œå‚æ•°æ˜¯å¯¹è‡ªèº«çš„å¯å˜å€Ÿç”¨ ï¼‰ï¼›è€Œä¹‹åçš„ `println!` åˆä½¿ç”¨äº†ä¸å¯å˜å€Ÿç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨ `s.clear()` å¤„å¯å˜å€Ÿç”¨ä¸ä¸å¯å˜å€Ÿç”¨è¯•å›¾åŒæ—¶ç”Ÿæ•ˆï¼Œå› æ­¤ç¼–è¯‘æ— æ³•é€šè¿‡ã€‚

   å¤ä¹ å€Ÿç”¨è§„åˆ™ï¼š

   æ€»çš„æ¥è¯´ï¼Œå€Ÿç”¨è§„åˆ™å¦‚ä¸‹ï¼š

   - åŒä¸€æ—¶åˆ»ï¼Œä½ åªèƒ½æ‹¥æœ‰è¦ä¹ˆä¸€ä¸ªå¯å˜å¼•ç”¨, è¦ä¹ˆä»»æ„å¤šä¸ªä¸å¯å˜å¼•ç”¨
   - å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆçš„

   è§£ç­”ï¼š

   ```rust
   // ä¿®å¤æ‰€æœ‰é”™è¯¯
   fn main() {
       let mut s = String::from("hello world");
   
       // è¿™é‡Œ, &s æ˜¯ `&String` ç±»å‹ï¼Œä½†æ˜¯ `first_word` å‡½æ•°éœ€è¦çš„æ˜¯ `&str` ç±»å‹ã€‚
       // å°½ç®¡ä¸¤ä¸ªç±»å‹ä¸ä¸€æ ·ï¼Œä½†æ˜¯ä»£ç ä»ç„¶å¯ä»¥å·¥ä½œï¼ŒåŸå› æ˜¯ `&String` ä¼šè¢«éšå¼åœ°è½¬æ¢æˆ `&str` ç±»å‹ï¼Œå¦‚æœå¤§å®¶æƒ³è¦çŸ¥é“æ›´å¤šï¼Œå¯ä»¥çœ‹çœ‹ Deref ç« èŠ‚: https://course.rs/advance/smart-pointer/deref.html
       let word = first_word(&s);
       println!("the first word is: {}", word);
     	s.clear(); 
   }
   fn first_word(s: &str) -> &str {
       &s[..1]
   }
   ```

### 2.4.2 å…ƒç»„

3. ğŸŒŸ è¿‡é•¿çš„å…ƒç»„æ— æ³•è¢«æ‰“å°è¾“å‡º

```rust
// ä¿®å¤ä»£ç é”™è¯¯
fn main() {
    let too_long_tuple = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13);
    println!("too long tuple: {:?}", too_long_tuple);
}
```

è§£ç­”ï¼šå‚è€ƒå®˜æ–¹ç­”æ¡ˆï¼Œå…ƒç»„é•¿åº¦ä¸º13æ—¶æ— æ³•æ‰“å°ï¼Œæ”¹ä¸º12æ—¶å¯ä»¥æ‰“å°ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€é•¿å¯æ‰“å°è¾“å‡ºé•¿åº¦ä¸º12çš„å…ƒç»„ã€‚

```rust
fn main() {
    let too_long_tuple = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12);
    println!("too long tuple: {:?}", too_long_tuple);
}
```

### 2.4.3 ç»“æ„ä½“

1. åˆå§‹åŒ–å®ä¾‹æ—¶ï¼Œ**æ¯ä¸ªå­—æ®µ**éƒ½éœ€è¦è¿›è¡Œåˆå§‹åŒ–
2. åˆå§‹åŒ–æ—¶çš„å­—æ®µé¡ºåº**ä¸éœ€è¦**å’Œç»“æ„ä½“å®šä¹‰æ—¶çš„é¡ºåºä¸€è‡´

